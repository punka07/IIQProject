<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Rule PUBLIC "sailpoint.dtd" "sailpoint.dtd">
<Rule language="beanshell" name="COB-Rule-PeopleSoftHCM-InactiveStatus" type="IdentityAttribute">
  <Description>Identity attribute rules are used when the value is not simply a copy of an application account attribute value.  A transformation may be necessary on the account attribute, or several account attributes may need to be combined to produce the identity attribute.

This rule can be called in two ways: as a global mapping rule and an application mapping rule.  A global mapping rule is called whenever the identity is refreshed.  The rule can look at any account attributes.  An application mapping rule is called only when the identity contains an account link for that application, this link is passed in the "link" argument which is not passed in global mapping rules.</Description>
  <Signature returnType="String">
    <Inputs>
      <Argument type="environment">
        <Description>
Arguments passed to the aggregation or refresh task.
</Description>
      </Argument>
      <Argument type="identity">
        <Description>
The Identity object that represents the user
           that is being aggregated.
</Description>
      </Argument>
      <Argument type="attributeDefinition">
        <Description>
The AttributeDefinition object for this attribute.
</Description>
      </Argument>
      <Argument type="link">
        <Description>
The Link object from the Identity, if this is an application
           mapping rule.  For global mapping rules this will be void.
</Description>
      </Argument>
      <Argument type="attributeSource">
        <Description>
The AttributeSource object.
</Description>
      </Argument>
      <Argument type="oldValue">
        <Description>
The original value of the application account attribute.
</Description>
      </Argument>
    </Inputs>
    <Returns>
      <Argument type="attributeValue">
        <Description>
The value of the attribute that should be populated.
          The rule should return this value.
</Description>
      </Argument>
    </Returns>
  </Signature>
  <Source><![CDATA[
/*******
 *                                                                              *
 * Generated: Fri Dec 15 02:46:13 EST 2017                                      *
 * Rule: Identity Attribute Template                                            *
 * Description: Identity Attribute Template                                     *
 * Inputs:                                                                      *
 *     environment - Arguments passed to the aggregation or refresh task.       *
 *     identity - The Identity object that represents the user                  *
 *            that is being aggregated.                                         *
 *     attributeDefinition - The AttributeDefinition object for this attribute. *
 *     link - The Link object from the Identity, if this is an application      *
 *            mapping rule.  For global mapping rules this will be void.        *
 *     attributeSource - The AttributeSource object.                            *
 *     oldValue - The original value of the application account attribute.      *
 * Returns:                                                                     *
 *     attributeValue - The value of the attribute that should be populated.    *
 *           The rule should return this value.                                 *
 ******/

String inactiveStatus="false";

String hrCode=(String) link.getAttribute("EMPL_STATUS");
if(hrCode.equalsIgnoreCase("T") || hrCode.equalsIgnoreCase("R") || hrCode.equalsIgnoreCase("D")){
   inactiveStatus="true";
}
log.warn("inactiveStatus::"+inactiveStatus);
return inactiveStatus;
  ]]></Source>
</Rule>
